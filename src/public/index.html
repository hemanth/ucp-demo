<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UCP - Universal Commerce Protocol</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <!-- ========================================================================
       Landing Page
       ======================================================================== -->
  <div id="landing" class="landing">
    <nav class="landing-nav">
      <div class="landing-logo">&#9670; UCP</div>
      <div class="landing-nav-links">
        <a href="https://github.com/Universal-Commerce-Protocol/ucp" target="_blank">GitHub</a>
        <a href="/.well-known/ucp" target="_blank">Discovery</a>
        <button class="btn btn-primary" onclick="showDemo()">Try Demo</button>
      </div>
    </nav>

    <div class="landing-hero">
      <div class="landing-badge">
        <span class="landing-badge-dot"></span>
        Open Standard
      </div>
      <h1 class="landing-title">Universal Commerce Protocol</h1>
      <p class="landing-subtitle">
        An open standard for seamless commerce interoperability between platforms,
        AI agents, and businesses. Enable any platform to complete purchases on any merchant.
      </p>
      <div class="landing-cta">
        <button class="btn btn-primary" onclick="showDemo()">Try Demo &rarr;</button>
        <a href="/.well-known/ucp" target="_blank" class="btn btn-secondary">View Discovery</a>
      </div>
    </div>

    <div class="landing-features">
      <div class="feature-card">
        <div class="feature-icon">01</div>
        <h3 class="feature-title">Discovery</h3>
        <p class="feature-desc">
          Platforms discover merchant capabilities via <code>/.well-known/ucp</code>.
          No manual integration required.
        </p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">02</div>
        <h3 class="feature-title">Checkout Sessions</h3>
        <p class="feature-desc">
          Standardized checkout flow with line items, buyer info, and payment selection.
          Works across any platform.
        </p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">03</div>
        <h3 class="feature-title">Payment Handlers</h3>
        <p class="feature-desc">
          Pluggable payment instruments. Platforms select from available options
          without knowing implementation details.
        </p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">04</div>
        <h3 class="feature-title">Agent-Ready</h3>
        <p class="feature-desc">
          Built for AI agents to complete purchases on behalf of users.
          Supports MCP, A2A, and REST transports.
        </p>
      </div>
    </div>

    <section class="landing-section">
      <h2 class="landing-section-title">Discovery Response</h2>
      <div class="landing-code">
        <pre><span class="comment">// GET /.well-known/ucp</span>
{
  <span class="key">"ucp"</span>: {
    <span class="key">"version"</span>: <span class="string">"2026-01-11"</span>,
    <span class="key">"capabilities"</span>: [
      { <span class="key">"name"</span>: <span class="string">"dev.ucp.shopping.checkout"</span> }
    ]
  },
  <span class="key">"merchant"</span>: {
    <span class="key">"name"</span>: <span class="string">"UCP Demo Shop"</span>,
    <span class="key">"description"</span>: <span class="string">"Fresh flowers delivered"</span>
  },
  <span class="key">"endpoints"</span>: {
    <span class="key">"checkout_sessions"</span>: <span class="string">"/api/shopping/checkout-sessions"</span>
  },
  <span class="key">"payment_handlers"</span>: [...]
}</pre>
      </div>
    </section>

    <footer class="landing-footer">
      <span>&copy; 2025 Universal Commerce Protocol</span>
      <span>Open Source - MIT License</span>
    </footer>
  </div>

  <!-- ========================================================================
       Demo App
       ======================================================================== -->
  <div id="demo-app" class="demo-app">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <h1 class="logo" onclick="showLanding()">
          <span class="logo-icon">&#9670;</span> UCP Demo Shop
        </h1>
        <div class="header-right">
          <label class="debug-toggle">
            <input type="checkbox" id="debug-mode" onchange="toggleDebugMode()">
            <span class="toggle-slider"></span>
            <span class="toggle-label">Debug Mode</span>
          </label>
          <button class="discovery-btn" onclick="showDiscovery()">
            View Discovery
          </button>
          <button class="back-btn" onclick="showLanding()">
            Back
          </button>
        </div>
      </div>
    </header>

    <!-- Main Chat Area -->
    <main class="chat-main">
      <!-- Chat Panel -->
      <section class="chat-panel">
        <div class="chat-header">
          <div class="assistant-info">
            <span class="assistant-avatar">UCP</span>
            <div>
              <h3>UCP Assistant</h3>
              <span class="status-online">Online</span>
            </div>
          </div>
          <div class="cart-indicator" id="cart-indicator">
            <span id="cart-count">0</span> items in cart
          </div>
        </div>

        <!-- Chat Messages -->
        <div id="chat-messages" class="chat-messages">
          <!-- Messages loaded dynamically -->
        </div>

        <!-- Quick Actions -->
        <div id="quick-actions" class="quick-actions">
          <!-- Quick action buttons loaded dynamically -->
        </div>

        <!-- Chat Input -->
        <div class="chat-input-container">
          <input
            type="text"
            id="chat-input"
            class="chat-input"
            placeholder="Type a message..."
            onkeypress="handleChatKeypress(event)"
          >
          <button class="chat-send-btn" onclick="sendMessage()">
            <span>&#10148;</span>
          </button>
        </div>
      </section>
    </main>

    <!-- Debug Panel (resizable) -->
    <aside id="debug-panel" class="debug-panel" style="display: none;">
      <div class="debug-resize-handle" id="debug-resize-handle"></div>
      <div class="debug-header">
        <h3>Debug Console</h3>
        <div class="debug-tabs">
          <button class="debug-tab active" data-tab="timeline" onclick="switchDebugTab('timeline')">Timeline</button>
          <button class="debug-tab" data-tab="state" onclick="switchDebugTab('state')">State</button>
          <button class="debug-tab" data-tab="requests" onclick="switchDebugTab('requests')">Requests</button>
        </div>
      </div>
      <div class="debug-content">
        <div id="debug-timeline" class="debug-tab-content active">
          <!-- Timeline entries -->
        </div>
        <div id="debug-state" class="debug-tab-content">
          <pre id="state-json"></pre>
        </div>
        <div id="debug-requests" class="debug-tab-content">
          <div id="requests-log"></div>
        </div>
      </div>
    </aside>

    <!-- Discovery Modal -->
    <div id="discovery-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>UCP Discovery Profile</h3>
          <button class="modal-close" onclick="hideDiscovery()">&times;</button>
        </div>
        <div class="modal-body">
          <p class="discovery-url">
            <strong>Endpoint:</strong> <code>GET /.well-known/ucp</code>
          </p>
          <p class="discovery-desc">
            This is how platforms discover what capabilities this merchant supports.
          </p>
          <pre id="discovery-json"></pre>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div id="loading" class="loading-overlay" style="display: none;">
    <div class="spinner"></div>
    <p id="loading-message">Loading...</p>
  </div>

  <script src="/app.js"></script>
</body>
</html>
